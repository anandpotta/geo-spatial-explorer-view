
/* Ensure edit controls are visible */
.leaflet-draw.leaflet-control,
.leaflet-draw-toolbar,
.leaflet-draw-toolbar-top,
.leaflet-draw-actions,
.leaflet-draw-edit-toolbar {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  z-index: 9999 !important;
  transform: translateZ(0) !important; /* Force hardware acceleration */
  backface-visibility: hidden !important; /* Reduce flickering */
  will-change: transform !important; /* Hint for browser optimization */
  transition: none !important; /* Disable transitions that might cause flickering */
  animation: none !important; /* Disable animations that might cause flickering */
}

/* Ensure edit and delete buttons are visible */
.leaflet-draw-edit-edit,
.leaflet-draw-edit-remove,
.leaflet-draw-draw-polygon,
.leaflet-draw-draw-rectangle,
.leaflet-draw-draw-marker,
.leaflet-draw-draw-circlemarker {
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
}

/* Image controls always visible */
.image-controls-wrapper,
.image-controls-container {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  z-index: 9999 !important;
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
}

/* Ensure buttons in the image controls are clickable */
.image-controls-container button {
  pointer-events: auto !important;
  visibility: visible !important;
  opacity: 1 !important;
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
}

/* Fix for SVG paths to ensure they're properly rendered with clearer images inside */
svg path.leaflet-interactive {
  fill-opacity: 1 !important; /* Increased from 0.2 to 1 for full image visibility */
  stroke-width: 2px; /* Reduced from 3 to be less intrusive */
  stroke-opacity: 0.7; /* Increased from 0.5 for better boundary visibility */
  stroke: #333; /* Darker stroke color for better contrast */
  opacity: 1 !important; /* Ensure full opacity */
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
}

/* Make path clearer when selected */
svg path.leaflet-interactive.leaflet-editing-icon {
  fill-opacity: 1 !important;
  opacity: 1 !important;
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
}

/* Make handle points more visible during edit mode */
.leaflet-edit-marker-selected,
.leaflet-marker-draggable,
.leaflet-marker-icon {
  z-index: 10000 !important;
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
  filter: drop-shadow(0px 0px 2px rgba(0,0,0,0.5)) !important;
}

/* Make edit vertices more visible */
.leaflet-edit-resize,
.leaflet-edit-move,
.leaflet-edit-rotate,
.leaflet-vertex-icon,
.leaflet-middle-icon {
  z-index: 10000 !important;
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
  filter: drop-shadow(0px 0px 2px rgba(0,0,0,0.5)) !important;
}

/* Ensure toolbar container is stable */
.leaflet-draw-section {
  position: relative !important;
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
}

/* Ensure all leaflet UI elements are stable */
.leaflet-control {
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
  box-shadow: 0 1px 5px rgba(0,0,0,0.4) !important;
}

/* Prevent flickering of the toolbar itself */
.leaflet-bar {
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: transform !important;
  box-shadow: 0 1px 5px rgba(0,0,0,0.4) !important;
}
